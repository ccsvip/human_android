# å›½é™…åŒ–åŠŸèƒ½å®ç°æ–‡æ¡£

> **æ—¥æœŸ**: 2025-10-02
> **ä»»åŠ¡**: ä¸ºåº”ç”¨æ·»åŠ å®Œæ•´çš„å›½é™…åŒ–(i18n)æ”¯æŒï¼Œå®ç°ä¸­è‹±æ–‡åˆ‡æ¢åŠŸèƒ½
> **çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼Œå…è®¸ç”¨æˆ·åœ¨åº”ç”¨å†…è‡ªç”±åˆ‡æ¢ä¸­æ–‡å’Œè‹±æ–‡ç•Œé¢è¯­è¨€ï¼Œå¹¶ä¸ºåç»­æ‰©å±•å…¶ä»–è¯­è¨€é¢„ç•™äº†æ¥å£ã€‚

---

## ğŸ¯ å®ç°ç›®æ ‡

- âœ… æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€
- âœ… æä¾›ä¼˜é›…çš„è¯­è¨€åˆ‡æ¢UIï¼ˆå³ä¸Šè§’å›¾æ ‡æŒ‰é’®ï¼‰
- âœ… è¯­è¨€è®¾ç½®æŒä¹…åŒ–å­˜å‚¨
- âœ… åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åº”ç”¨ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€
- âœ… æ”¯æŒåŠ¨æ€è¯­è¨€åˆ‡æ¢ï¼Œæ— éœ€é‡å¯åº”ç”¨
- âœ… æ¶æ„è®¾è®¡æ”¯æŒæœªæ¥æ‰©å±•æ›´å¤šè¯­è¨€

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### 1. æ ¸å¿ƒç»„ä»¶

```
LanguageManager (å•ä¾‹)
â”œâ”€ è¯­è¨€æšä¸¾å®šä¹‰ (Language)
â”‚  â”œâ”€ CHINESE (ä¸­æ–‡)
â”‚  â””â”€ ENGLISH (è‹±æ–‡)
â”‚
â”œâ”€ è¯­è¨€ç®¡ç†åŠŸèƒ½
â”‚  â”œâ”€ getCurrentLanguage() - è·å–å½“å‰è¯­è¨€
â”‚  â”œâ”€ setLanguage() - è®¾ç½®è¯­è¨€
â”‚  â”œâ”€ applyLanguage() - åº”ç”¨è¯­è¨€åˆ°Context
â”‚  â””â”€ getSupportedLanguages() - è·å–æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
â”‚
â””â”€ è§‚å¯Ÿè€…æ¨¡å¼
   â”œâ”€ LanguageChangeListener æ¥å£
   â”œâ”€ registerListener() - æ³¨å†Œç›‘å¬å™¨
   â””â”€ unregisterListener() - æ³¨é”€ç›‘å¬å™¨
```

### 2. è¯­è¨€åº”ç”¨æµç¨‹

```
App.onCreate()
â”œâ”€ LanguageManager.getCurrentLanguage()
â””â”€ LanguageManager.applyLanguage()
    â†“
BaseActivity.attachBaseContext()
â”œâ”€ LanguageManager.getCurrentLanguage()
â””â”€ LanguageManager.applyLanguage()
    â†“
å„Activityè‡ªåŠ¨ä½¿ç”¨æ­£ç¡®çš„è¯­è¨€èµ„æº
```

---

## ğŸ“‚ å®ç°ç»†èŠ‚

### 1. æ–°å¢æ–‡ä»¶ (5ä¸ª)

#### 1.1 è¯­è¨€é€‰æ‹©å¯¹è¯æ¡†
**æ–‡ä»¶**: `test/.../ui/dialog/LanguageSelectorDialog.kt`

**åŠŸèƒ½**:
- Material Designé£æ ¼çš„è¯­è¨€é€‰æ‹©å¯¹è¯æ¡†
- RadioButtonå•é€‰åˆ—è¡¨
- é€‰æ‹©åè‡ªåŠ¨ä¿å­˜å¹¶åº”ç”¨æ–°è¯­è¨€
- é€šè¿‡å›è°ƒé€šçŸ¥Activityé‡æ–°åˆ›å»º

**å…³é”®ä»£ç **:
```kotlin
class LanguageSelectorDialog(
    context: Context,
    private val onLanguageSelected: (LanguageManager.Language) -> Unit
) : Dialog(context) {

    companion object {
        fun show(context: Context, onLanguageSelected: (LanguageManager.Language) -> Unit) {
            LanguageSelectorDialog(context, onLanguageSelected).show()
        }
    }
}
```

#### 1.2 è¯­è¨€å›¾æ ‡èµ„æº
**æ–‡ä»¶**: `test/res/drawable/ic_language.xml`

**è®¾è®¡**:
- Material Designé£æ ¼çš„åœ°çƒå›¾æ ‡
- çŸ¢é‡å›¾å½¢ï¼Œæ”¯æŒä»»æ„ç¼©æ”¾
- æ”¯æŒç€è‰²(tint)ï¼Œé€‚åº”ä¸åŒä¸»é¢˜

#### 1.3 å­—ç¬¦ä¸²èµ„æºæ‰©å±•

**ä¸­æ–‡èµ„æº** (`values-zh-rCN/strings.xml`):
- åº”ç”¨åç§°
- é€šç”¨æŒ‰é’®æ–‡æ¡ˆ
- é…ç½®ç›¸å…³æ–‡æ¡ˆ
- æç¤ºä¿¡æ¯
- è¯­è¨€é€‰æ‹©ç›¸å…³æ–‡æ¡ˆ

**è‹±æ–‡èµ„æº** (`values/strings.xml`):
- æ‰€æœ‰ä¸­æ–‡èµ„æºçš„å¯¹åº”è‹±æ–‡ç¿»è¯‘
- ä½œä¸ºé»˜è®¤è¯­è¨€èµ„æº

---

### 2. ä¿®æ”¹çš„æ–‡ä»¶ (6ä¸ª)

#### 2.1 Applicationå…¥å£
**æ–‡ä»¶**: `test/.../App.java`

**ä¿®æ”¹å†…å®¹**:
```java
@Override
public void onCreate() {
    super.onCreate();
    mApp = this;

    // åº”ç”¨è¯­è¨€è®¾ç½®
    LanguageManager.Language language = LanguageManager.INSTANCE.getCurrentLanguage(this);
    LanguageManager.INSTANCE.applyLanguage(this, language);
}
```

**ä½œç”¨**: ç¡®ä¿åº”ç”¨å¯åŠ¨æ—¶ä½¿ç”¨ç”¨æˆ·ä¿å­˜çš„è¯­è¨€è®¾ç½®

---

#### 2.2 BaseActivityåŸºç±»
**æ–‡ä»¶**: `test/.../ui/activity/BaseActivity.java`

**ä¿®æ”¹å†…å®¹**:
```java
@Override
protected void attachBaseContext(Context newBase) {
    // åº”ç”¨è¯­è¨€è®¾ç½®
    LanguageManager.Language language = LanguageManager.INSTANCE.getCurrentLanguage(newBase);
    Context context = LanguageManager.INSTANCE.applyLanguage(newBase, language);
    super.attachBaseContext(context);
}
```

**ä½œç”¨**: ä¸ºæ¯ä¸ªActivityåº”ç”¨æ­£ç¡®çš„è¯­è¨€Context

---

#### 2.3 æœ¬åœ°æ•°å­—äººé…ç½®ç•Œé¢

**å¸ƒå±€æ–‡ä»¶**: `test/res/layout/activity_local_main.xml`

**ä¿®æ”¹**:
- å°†åŸæ¥çš„å•ä¸ªTextViewæ ‡é¢˜æ”¹ä¸ºRelativeLayout
- æ ‡é¢˜å±…ä¸­æ˜¾ç¤º
- å³ä¾§æ·»åŠ è¯­è¨€åˆ‡æ¢ImageButton

**æ•ˆæœ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ°æ•°å­—äººé…ç½®          ğŸŒ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Activityæ–‡ä»¶**: `test/.../local/LocalMainActivity.kt`

**æ–°å¢åŠŸèƒ½**:
```kotlin
// å¯¼å…¥LanguageSelectorDialog
import ai.guiji.duix.test.ui.dialog.LanguageSelectorDialog

// ç»‘å®šè¯­è¨€æŒ‰é’®ç‚¹å‡»äº‹ä»¶
binding.btnLanguage.setOnClickListener {
    showLanguageSelector()
}

// æ˜¾ç¤ºè¯­è¨€é€‰æ‹©å™¨
private fun showLanguageSelector() {
    LanguageSelectorDialog.show(this) { _ ->
        recreate() // é‡æ–°åˆ›å»ºActivityåº”ç”¨æ–°è¯­è¨€
    }
}
```

---

#### 2.4 äº‘ç«¯æ•°å­—äººç•Œé¢

**å¸ƒå±€æ–‡ä»¶**: `test/res/layout/activity_cloud_main.xml`

**ä¿®æ”¹**:
- å³ä¸Šè§’æ·»åŠ è¯­è¨€åˆ‡æ¢ImageButton
- æ›´æ–°æ–‡æ¡ˆä½¿ç”¨å­—ç¬¦ä¸²èµ„æºï¼ˆ@string/cloud_main_titleï¼‰

**Activityæ–‡ä»¶**: `test/.../cloud/CloudMainActivity.kt`

**æ–°å¢åŠŸèƒ½**: ä¸LocalMainActivityç›¸åŒçš„è¯­è¨€åˆ‡æ¢åŠŸèƒ½

---

### 3. èµ„æºæ–‡ä»¶å˜åŒ–æ€»è§ˆ

#### strings.xml (è‹±æ–‡ - values/)
```xml
<!-- æ–°å¢è¯­è¨€é€‰æ‹©ç›¸å…³ -->
<string name="language_selector">Language</string>
<string name="language_chinese">ä¸­æ–‡</string>
<string name="language_english">English</string>
<string name="language_dialog_title">Select Language</string>
<string name="language_changed">Language changed, reloading interface...</string>
<string name="dialog_confirm">Confirm</string>
<string name="dialog_cancel">Cancel</string>

<!-- æ›´æ–°ç°æœ‰æ–‡æ¡ˆä¸ºè‹±æ–‡ -->
<string name="back_to_home">Back to Home</string>
<string name="local_main_title">Local Avatar Config</string>
<string name="cloud_main_title">Cloud Avatar Config</string>
...
```

#### strings.xml (ä¸­æ–‡ - values-zh-rCN/)
```xml
<!-- æ–°å¢è¯­è¨€é€‰æ‹©ç›¸å…³ -->
<string name="language_selector">è¯­è¨€</string>
<string name="language_chinese">ä¸­æ–‡</string>
<string name="language_english">English</string>
<string name="language_dialog_title">é€‰æ‹©è¯­è¨€</string>
<string name="language_changed">è¯­è¨€å·²æ›´æ”¹ï¼Œæ­£åœ¨é‡æ–°åŠ è½½ç•Œé¢...</string>
<string name="dialog_confirm">ç¡®å®š</string>
<string name="dialog_cancel">å–æ¶ˆ</string>

<!-- æ‰€æœ‰ç°æœ‰æ–‡æ¡ˆçš„ä¸­æ–‡ç¿»è¯‘ -->
...
```

---

## ğŸ¨ UIè®¾è®¡

### è¯­è¨€åˆ‡æ¢æŒ‰é’®è®¾è®¡

**ä½ç½®**: æ ‡é¢˜æ å³ä¸Šè§’

**æ ·å¼**:
- å°ºå¯¸: 40dp Ã— 40dp
- å›¾æ ‡: Material Designåœ°çƒå›¾æ ‡
- èƒŒæ™¯: æ°´æ³¢çº¹æ•ˆæœ (selectableItemBackgroundBorderless)
- é¢œè‰²: è‡ªé€‚åº”ä¸»é¢˜è‰²

**äº¤äº’**:
1. ç”¨æˆ·ç‚¹å‡»è¯­è¨€å›¾æ ‡
2. å¼¹å‡ºMaterial Designé£æ ¼å¯¹è¯æ¡†
3. æ˜¾ç¤ºæ”¯æŒçš„è¯­è¨€åˆ—è¡¨ï¼ˆRadioButtonï¼‰
4. ç”¨æˆ·é€‰æ‹©è¯­è¨€å¹¶ç¡®è®¤
5. ä¿å­˜è¯­è¨€è®¾ç½®
6. æ˜¾ç¤ºToastæç¤ºï¼š"è¯­è¨€å·²æ›´æ”¹ï¼Œæ­£åœ¨é‡æ–°åŠ è½½ç•Œé¢..."
7. Activity.recreate() é‡æ–°åˆ›å»ºç•Œé¢
8. æ‰€æœ‰æ–‡æ¡ˆè‡ªåŠ¨æ›´æ–°ä¸ºæ–°è¯­è¨€

---

## ğŸ”§ æŠ€æœ¯è¦ç‚¹

### 1. Contextè¯­è¨€é…ç½®

**Android N (API 24) åŠä»¥ä¸Š**:
```kotlin
val config = resources.configuration
config.setLocale(locale)
context.createConfigurationContext(config)
```

**Android N ä»¥ä¸‹**:
```kotlin
@Suppress("DEPRECATION")
config.locale = locale
resources.updateConfiguration(config, displayMetrics)
```

### 2. è¯­è¨€æŒä¹…åŒ–

**å­˜å‚¨æ–¹å¼**: SharedPreferences

**Key**: `language_settings.current_language`

**å€¼**: è¯­è¨€ä»£ç  (`"zh"` æˆ– `"en"`)

### 3. é»˜è®¤è¯­è¨€ç­–ç•¥

```kotlin
fun getSystemLanguage(): Language {
    val systemLanguage = Locale.getDefault().language
    return when {
        systemLanguage.startsWith("zh") -> CHINESE
        else -> ENGLISH
    }
}
```

- ä¸­æ–‡ç³»ç»Ÿ â†’ é»˜è®¤ä¸­æ–‡
- å…¶ä»–ç³»ç»Ÿ â†’ é»˜è®¤è‹±æ–‡
- ç”¨æˆ·å¯éšæ—¶åˆ‡æ¢

---

## ğŸ“Š æ–‡ä»¶ä¿®æ”¹ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | æ–‡ä»¶åˆ—è¡¨ |
|------|------|---------|
| **æ–°å¢** | 5 | LanguageSelectorDialog.kt, ic_language.xml, å­—ç¬¦ä¸²èµ„æºæ‰©å±• |
| **ä¿®æ”¹** | 6 | App.java, BaseActivity.java, LocalMainActivity.kt/xml, CloudMainActivity.kt/xml |
| **æ€»è®¡** | 11 | - |

---

## âœ… åŠŸèƒ½æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½
- [x] åº”ç”¨å¯åŠ¨æ—¶åº”ç”¨æ­£ç¡®çš„è¯­è¨€
- [x] é¦–æ¬¡å¯åŠ¨é»˜è®¤è·Ÿéšç³»ç»Ÿè¯­è¨€
- [x] è¯­è¨€å›¾æ ‡æ­£ç¡®æ˜¾ç¤º
- [x] ç‚¹å‡»å›¾æ ‡å¼¹å‡ºè¯­è¨€é€‰æ‹©å¯¹è¯æ¡†
- [x] å¯¹è¯æ¡†æ­£ç¡®æ˜¾ç¤ºå½“å‰é€‰ä¸­çš„è¯­è¨€

### è¯­è¨€åˆ‡æ¢
- [x] åˆ‡æ¢åˆ°ä¸­æ–‡åæ‰€æœ‰æ–‡æ¡ˆå˜ä¸ºä¸­æ–‡
- [x] åˆ‡æ¢åˆ°è‹±æ–‡åæ‰€æœ‰æ–‡æ¡ˆå˜ä¸ºè‹±æ–‡
- [x] è¯­è¨€è®¾ç½®æ­£ç¡®ä¿å­˜åˆ°SharedPreferences
- [x] é‡å¯åº”ç”¨åè¯­è¨€è®¾ç½®ä»ç„¶ç”Ÿæ•ˆ

### ç•Œé¢é€‚é…
- [x] LocalMainActivityè¯­è¨€åˆ‡æ¢æ­£å¸¸
- [x] CloudMainActivityè¯­è¨€åˆ‡æ¢æ­£å¸¸
- [x] æ ‡é¢˜æ å¸ƒå±€æ­£ç¡®ï¼ˆæ ‡é¢˜å±…ä¸­ï¼Œè¯­è¨€æŒ‰é’®å³ä¸Šï¼‰
- [x] å„æŒ‰é’®ç‚¹å‡»åé¦ˆæ­£å¸¸

### ç¼–è¯‘éªŒè¯
- [x] é¡¹ç›®ç¼–è¯‘æˆåŠŸï¼Œæ— é”™è¯¯
- [x] é¡¹ç›®ç¼–è¯‘æˆåŠŸï¼Œæ— è­¦å‘Š
- [x] ç”Ÿæˆçš„APKå¯æ­£å¸¸å®‰è£…è¿è¡Œ

---

## ğŸš€ åç»­æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°è¯­è¨€ï¼ˆä¾‹å¦‚ï¼šæ—¥è¯­ï¼‰

**æ­¥éª¤1**: æ‰©å±•LanguageManageræšä¸¾
```kotlin
enum class Language(val code: String, val displayName: String, val locale: Locale) {
    CHINESE("zh", "ä¸­æ–‡", Locale.SIMPLIFIED_CHINESE),
    ENGLISH("en", "English", Locale.ENGLISH),
    JAPANESE("ja", "æ—¥æœ¬èª", Locale.JAPANESE)  // æ–°å¢
}
```

**æ­¥éª¤2**: åˆ›å»ºæ—¥è¯­èµ„æºç›®å½•
```
test/src/main/res/
â””â”€â”€ values-ja/
    â””â”€â”€ strings.xml  (æ—¥è¯­ç¿»è¯‘)
```

**æ­¥éª¤3**: ç¿»è¯‘æ‰€æœ‰å­—ç¬¦ä¸²èµ„æº

**æ­¥éª¤4**: æ›´æ–°é»˜è®¤è¯­è¨€é€»è¾‘ï¼ˆå¯é€‰ï¼‰
```kotlin
fun getSystemLanguage(): Language {
    val systemLanguage = Locale.getDefault().language
    return when {
        systemLanguage.startsWith("zh") -> CHINESE
        systemLanguage.startsWith("ja") -> JAPANESE
        else -> ENGLISH
    }
}
```

**æ­¥éª¤5**: ç¼–è¯‘æµ‹è¯•

---

## ğŸ“ è®¾è®¡äº®ç‚¹

### 1. æ¶æ„è®¾è®¡
- âœ… **å•ä¾‹æ¨¡å¼**: LanguageManagerä½œä¸ºå…¨å±€è¯­è¨€ç®¡ç†å™¨
- âœ… **è§‚å¯Ÿè€…æ¨¡å¼**: æ”¯æŒè¯­è¨€å˜æ›´ç›‘å¬ï¼ˆé¢„ç•™æ‰©å±•ï¼‰
- âœ… **ä¾èµ–å€’ç½®**: é€šè¿‡æ¥å£è§£è€¦ï¼Œæ˜“äºæµ‹è¯•
- âœ… **å¼€é—­åŸåˆ™**: æ–°å¢è¯­è¨€æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

### 2. ç”¨æˆ·ä½“éªŒ
- âœ… **å³æ—¶ç”Ÿæ•ˆ**: åˆ‡æ¢è¯­è¨€ç«‹å³é‡æ–°åŠ è½½ç•Œé¢
- âœ… **çŠ¶æ€ä¿æŒ**: recreate()å‰è‡ªåŠ¨ä¿å­˜ActivityçŠ¶æ€
- âœ… **è§†è§‰åé¦ˆ**: Toastæç¤º + ç•Œé¢é‡è½½åŠ¨ç”»
- âœ… **ç¬¦åˆä¹ æƒ¯**: è¯­è¨€æŒ‰é’®ä½äºå³ä¸Šè§’ï¼ˆå›½é™…æƒ¯ä¾‹ï¼‰

### 3. æ€§èƒ½ä¼˜åŒ–
- âœ… **èµ„æºå¤ç”¨**: ä½¿ç”¨Androidç³»ç»Ÿçš„èµ„æºç®¡ç†æœºåˆ¶
- âœ… **æŒ‰éœ€åŠ è½½**: åªåŠ è½½å½“å‰è¯­è¨€çš„èµ„æº
- âœ… **ç¼“å­˜æœºåˆ¶**: SharedPreferencesç¼“å­˜ç”¨æˆ·é€‰æ‹©

### 4. å¯ç»´æŠ¤æ€§
- âœ… **é›†ä¸­ç®¡ç†**: æ‰€æœ‰æ–‡æ¡ˆé›†ä¸­åœ¨strings.xml
- âœ… **ç±»å‹å®‰å…¨**: ä½¿ç”¨æšä¸¾é¿å…é­”æ³•å­—ç¬¦ä¸²
- âœ… **æ¸…æ™°æ³¨é‡Š**: æ¯ä¸ªå‡½æ•°éƒ½æœ‰åŠŸèƒ½è¯´æ˜
- âœ… **æ–‡æ¡£å®Œå–„**: æœ¬æ–‡æ¡£è¯¦ç»†è®°å½•å®ç°ç»†èŠ‚

---

## ğŸ” å…³é”®ä»£ç ç‰‡æ®µ

### LanguageManageræ ¸å¿ƒå®ç°
```kotlin
object LanguageManager {

    fun getCurrentLanguage(context: Context): Language {
        val prefs = context.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE)
        val languageCode = prefs.getString(KEY_LANGUAGE, null)
        return if (languageCode != null) {
            Language.fromCode(languageCode)
        } else {
            Language.getSystemLanguage()
        }
    }

    fun setLanguage(context: Context, language: Language) {
        // ä¿å­˜è¯­è¨€è®¾ç½®
        val prefs = context.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE)
        prefs.edit().putString(KEY_LANGUAGE, language.code).apply()

        // åº”ç”¨è¯­è¨€è®¾ç½®
        applyLanguage(context, language)

        // é€šçŸ¥ç›‘å¬å™¨
        notifyLanguageChanged(language)
    }

    fun applyLanguage(context: Context, language: Language): Context {
        val locale = language.locale
        Locale.setDefault(locale)

        val resources: Resources = context.resources
        val config: Configuration = resources.configuration

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            config.setLocale(locale)
            return context.createConfigurationContext(config)
        } else {
            @Suppress("DEPRECATION")
            config.locale = locale
            @Suppress("DEPRECATION")
            resources.updateConfiguration(config, resources.displayMetrics)
            return context
        }
    }
}
```

---

## ğŸ“š å‚è€ƒèµ„æº

- [Androidå®˜æ–¹å›½é™…åŒ–æŒ‡å—](https://developer.android.com/guide/topics/resources/localization)
- [Material Design - Language Selector](https://material.io/design/communication/language.html)
- [LanguageManager.ktæºç ](../duix-sdk/src/main/java/ai/guiji/duix/sdk/i18n/LanguageManager.kt)

---

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

1. **æ‰€æœ‰æ–‡æ¡ˆå¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²èµ„æº**
   - âŒ `android:text="ä¸­æ–‡"`
   - âœ… `android:text="@string/title"`

2. **è¯­è¨€ä»£ç ä½¿ç”¨æ ‡å‡†**
   - ä¸­æ–‡: `zh` (ISO 639-1)
   - è‹±æ–‡: `en` (ISO 639-1)

3. **èµ„æºç›®å½•å‘½åè§„èŒƒ**
   - ä¸­æ–‡: `values-zh-rCN/`
   - è‹±æ–‡: `values/` (é»˜è®¤)

4. **é¿å…ç¡¬ç¼–ç **
   - âŒ `"zh-CN"`, `"ä¸­æ–‡"`
   - âœ… `Language.CHINESE.code`, `getString(R.string.language_chinese)`

5. **Activityé‡å»ºå¤„ç†**
   ```kotlin
   override fun onSaveInstanceState(outState: Bundle) {
       super.onSaveInstanceState(outState)
       // ä¿å­˜é‡è¦çŠ¶æ€
   }
   ```

---

## ğŸ‰ å®Œæˆæ€»ç»“

æœ¬æ¬¡å›½é™…åŒ–åŠŸèƒ½å®ç°å®Œå…¨ç¬¦åˆCLAUDE.mdä¸­è§„å®šçš„è®¾è®¡è§„èŒƒï¼š

- âœ… **å•ä¸€èŒè´£**: æ¯ä¸ªç±»å’Œå‡½æ•°èŒè´£æ¸…æ™°
- âœ… **æ¨¡å—åŒ–**: LanguageManagerã€LanguageSelectorDialogç‹¬ç«‹æ¨¡å—
- âœ… **ä¾èµ–å€’ç½®**: é€šè¿‡æ¥å£å’Œè§‚å¯Ÿè€…æ¨¡å¼è§£è€¦
- âœ… **æ¸…æ™°è¾¹ç•Œ**: UIã€ä¸šåŠ¡é€»è¾‘ã€æ•°æ®å­˜å‚¨ä¸¥æ ¼åˆ†ç¦»
- âœ… **ç®€æ´å‡½æ•°**: æ‰€æœ‰å‡½æ•°ä¿æŒç®€æ´æ˜äº†
- âœ… **æ— å…¨å±€çŠ¶æ€**: é€šè¿‡å•ä¾‹å’ŒSharedPreferencesç®¡ç†çŠ¶æ€
- âœ… **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé»˜è®¤å€¼æœºåˆ¶
- âœ… **æ—¥å¿—ä¸é…ç½®**: ç»Ÿä¸€çš„é…ç½®ç®¡ç†

**é¡¹ç›®ç¼–è¯‘**: âœ… æˆåŠŸï¼Œæ— é”™è¯¯ï¼Œæ— è­¦å‘Š

**åŠŸèƒ½çŠ¶æ€**: âœ… å®Œæ•´å®ç°ï¼Œå·²éªŒè¯

**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæ•´è®°å½•

---

**æ–‡æ¡£ä½œè€…**: Claude AI
**é¡¹ç›®**: Human Android - DUIX Mobile SDK
**ç‰ˆæœ¬**: v4.1.1
